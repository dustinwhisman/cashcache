<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.2.1/firebase-auth.js"></script>
<script>
  // Your web app's Firebase configuration
  var firebaseConfig = {
    apiKey: '{{ env.firebaseApiKey }}',
    authDomain: '{{ env.firebaseAuthDomain }}.firebaseapp.com',
    projectId: '{{ env.firebaseAuthDomain }}',
    storageBucket: '{{ env.firebaseAuthDomain }}.appspot.com',
    messagingSenderId: '{{ env.firebaseMessagingSenderId }}',
    appId: '1:{{ env.firebaseMessagingSenderId }}:web:{{ env.firebaseAppId }}',
  };
  // Initialize Firebase
  firebase.initializeApp(firebaseConfig);

  let appUser;
  firebase.auth().onAuthStateChanged((user) => {
    const loginLink = document.querySelector('[data-login-link]');
    const accountLink = document.querySelector('[data-account-link]');
    if (user) {
      appUser = user;
      loginLink.setAttribute('hidden', true);
      accountLink.removeAttribute('hidden');
    } else {
      loginLink.removeAttribute('hidden');
      accountLink.setAttribute('hidden', true);
    }
  });
</script>
